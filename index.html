<!DOCTYPE html>
<html>
<head>

<script src="js/glMatrix-1.0.1.min.js"></script>
<script src="js/WebGL.js"></script>
<script>
function initBuffers(gl) {
    var triangleBuffers = {};
    triangleBuffers.positionBuffer = gl.createArrayBuffer([
        0, 1, 0,
        -1, -1, 0,
        1, -1, 0
    ]);
    return triangleBuffers;
}

function drawStage(gl, triangleBuffers, angle) {
    gl.clear();
    // set field of view at 45 degrees
    // set viewing range between 0.1 and 100.0 units away.
    gl.perspective(45, 0.1, 100.0);
    gl.identity();
    
    // translate model-view matrix
    gl.translate(0, 0, -5);
    // rotate model-view matrix about y-axis
    gl.rotate(angle, 0, 1, 0);
    
    gl.pushPositionBuffer(triangleBuffers);
    gl.drawArrays(triangleBuffers);
}

window.onload = function(){
    var gl = new WebGL("myCanvas", "experimental-webgl");
    gl.setShaderProgram("BLUE_COLOR");
    var triangleBuffers = initBuffers(gl);
    var angle = 0;
    
    gl.setStage(function(){
        // update angle
        var angularVelocity = Math.PI / 2; // radians / second
        var angleEachFrame = angularVelocity *
            gl.getTimeInterval() / 1000;
        angle += angleEachFrame;
        
        this.clear();
        
        drawStage(gl, triangleBuffers, angle);
    });
    gl.startAnimation();
};

</script>

</head>
<body>

<canvas id="myCanvas" width="600" height="250"
			style="border:1px solid black;"></canvas>

</body>
</html>